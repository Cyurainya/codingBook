## 过程

1. 首先访问`本地的 DNS` ，如果没有命中，继续递归或者迭代查找，直到命中拿到对应的 IP 地址。
2. 拿到对应的 IP 地址之后`服务器端发送请求到目的地址`。注意这里返回的不直接是 cdn 服务器的 IP 地址，而是全局负载均衡系统的 IP 地址
3. 全局负载均衡系统会根据客户端的 IP 地址和请求的 url 和相应的区域负载均衡系统通信
4. 区域负载均衡系统拿着这两个东西获取距离客户端最近且有相应资源的 cdn 缓存服务器的地址，返回给全局负载均衡系统
5. 全局负载均衡系统返回确定的 cdn 缓存服务器的地址给客户端。
6. 客户端请求缓存服务器上的文件

## 回源

当 cdn 缓存服务器中没有符合客户端要求的资源的时候，缓存服务器会请求上一级缓存服务器，以此类推，直到获取到。最后如果还是没有，就会回到我们自己的服务器去获取资源

## 参考文献

1. [cdn 一网打尽](https://juejin.cn/post/6844903604596244493)
2. [CDN 的基本工作过程](https://book.51cto.com/art/201205/338756.htm)
