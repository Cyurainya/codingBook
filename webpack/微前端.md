# 微前端

## 背景

利用微件拆分来达到工程拆分治理的方案，可以结局的一些工程膨胀、开发维护困难等问题

### 问题

- 新业务线产品急速增加，同时为了保证三端系统复用效率的最大化，把文件放入同一仓库管理，导致文件数量增长极快，管理及协同开发难度也在不断加大。
- 文件越来越多，文件结构越不受控制，业务开发寻址变得越来越困难。
- 文件越来越多，开发、构建、部署速度变得越来越慢，开发体验在持续下降。
- 不同业务线间没有物理隔离，出现了跨业务线互相引用混乱，例如 A 业务线出现了 B 业务线名字的组件。

![problem](https://p0.meituan.net/travelcube/aba723dd5766a90fca78309da0dc980893221.png)

## 需求分析

| 需求点     | 需求点                                                                                                                                                                                                                           |
| ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 拆分解耦   | （1）按业务领域拆分成不同的仓库进行维护，不同业务线的开发者更加独立，不同业务线之间互不影响。（2）物理层面拆分，加速寻址，新增功能修改 Bug 更加迅速。（3）逻辑层面拆分，杜绝引用混乱，不会出现 A 业务线引用 B 业务线组件的情况。 |
| 加速体验   | （1）开发环境急速启动，提高开发体验。（2）业务线按需打包，急速部署上线。                                                                                                                                                         |
| 侵入性低   | 微前端方案改动原有代码的侵入性降到最小，无需大规模改造，减少甚至消除回归测试的成本。                                                                                                                                             |
| 学习成本低 | 开发人员无需感知拆分的存在，保持单页应用的开发体验，不需要学习额外的规则。                                                                                                                                                       |
| 统一技术栈 | 为了统一共建与技术沉淀，团队内工程已经统一到了 React 技术栈，禁止使用不同的技术栈进行开发。                                                                                                                                      |

## 总结

- 按照领域（业务线）拆分工程，**工程的可维护性得到提高**，相关领域进行了内聚，无关领域进行了解耦。
- 子工程提供了 PC、H5、KA 三端的物理复用土壤，**消除了工程膨胀问题，工程大小也变得可控**。
- **子工程打包速度从分钟级降为秒级，提高了开发体验，加快了上线的速度**。
- **子工程开发支持热更新，开发体验不降级**。
- **子工程能够单独开发、单独部署、单独上线，业务线间互不影响**。
- 整体工程**改造成本低**，插拔式开发，无侵入式代码，在正常业务开发的同时短期内就可以完成上线。
- 开发者**学习成本低**，完整地保留了单页应用开发的开发体验，**开发者可快速上手**。

参考文章：

1.  https://tech.meituan.com/2020/02/27/meituan-waimai-micro-frontends-practice.html
